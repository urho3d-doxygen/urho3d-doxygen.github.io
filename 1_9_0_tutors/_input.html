<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Urho3D: Input</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Urho3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_urho3_d_1_1_input.html" title="Input subsystem. Converts operating system window messages to input state and events.">Input</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The <a class="el" href="class_urho3_d_1_1_input.html" title="Input subsystem. Converts operating system window messages to input state and events.">Input</a> subsystem provides keyboard, mouse, joystick and touch input both via a polled interface and events. This subsystem is also used for querying whether the application window has input focus or is minimized.</p>
<p >The subsystem is always instantiated, even in headless mode, but is active only once the application window has been created. Once active, the subsystem takes over the operating system mouse cursor. It will be hidden by default, so the <a class="el" href="class_urho3_d_1_1_u_i.html" title="UI subsystem. Manages the graphical user interface.">UI</a> should be used to render a software cursor if necessary. For editor-like applications the operating system cursor can be made visible by calling <a class="el" href="class_urho3_d_1_1_input.html#a42f016907a65f849a98e0ad9c24d97ee">SetMouseVisible()</a>.</p>
<p >The input events include:</p>
<ul>
<li>E_MOUSEBUTTONUP: a mouse button was released.</li>
<li>E_MOUSEBUTTONDOWN: a mouse button was pressed.</li>
<li>E_MOUSEMOVE: the mouse moved.</li>
<li>E_MOUSEWHEEL: the mouse wheel moved.</li>
<li>E_KEYUP: a key was released.</li>
<li>E_KEYDOWN: a key was pressed.</li>
<li>E_TEXTINPUT: a string of translated text input in UTF8 format. May contain a single character or several.</li>
<li>E_JOYSTICKCONNECTED: a joystick was plugged in.</li>
<li>E_JOYSTICKDISCONNECTED: a joystick was disconnected.</li>
<li>E_JOYSTICKBUTTONDOWN: a joystick button was pressed.</li>
<li>E_JOYSTICKBUTTONUP: a joystick button was released.</li>
<li>E_JOYSTICKAXISMOVE: a joystick axis was moved.</li>
<li>E_JOYSTICKHATMOVE: a joystick POV hat was moved.</li>
<li>E_TOUCHBEGIN: a finger touched the screen.</li>
<li>E_TOUCHEND: a finger was lifted from the screen.</li>
<li>E_TOUCHMOVE: a finger moved on the screen.</li>
<li>E_GESTURERECORDED : recording a touch gesture is complete.</li>
<li>E_GESTUREINPUT : a touch gesture was recognized.</li>
<li>E_MULTIGESTURE : a multi-finger pinch/rotation touch gesture is underway.</li>
<li>E_DROPFILE : a file was drag-dropped on the application window.</li>
<li>E_INPUTFOCUS : application input focus or window minimization state changed.</li>
<li>E_MOUSEVISIBLECHANGED : the visibility of the operating system mouse cursor was changed.</li>
<li>E_EXITREQUESTED : application exit was requested (eg. with the window close button.)</li>
<li>E_INPUTBEGIN : input handling starts.</li>
<li>E_INPUTEND : input handling ends.</li>
<li>E_SDLRAWINPUT : raw SDL event is sent for customized event processing.</li>
</ul>
<h1><a class="anchor" id="InputKeyboard"></a>
Keyboard and mouse input</h1>
<p >Key events include both the symbolic keycode ("Key") that depends on the keyboard layout, the layout- and operating system-independent SDL scancode ("Scancode"), and the true operating system-specific raw keycode ("Raw").</p>
<p >The input polling API differentiates between the initiation of a key/mouse button press, and holding the key or button down. <a class="el" href="class_urho3_d_1_1_input.html#a084077e0831f34dbb32521144b8e3285">GetKeyPress()</a> and <a class="el" href="class_urho3_d_1_1_input.html#a4f15a0bb945ddacdc51c0e9c3b729d60">GetMouseButtonPress()</a> return true only for one frame (the initiation) while <a class="el" href="class_urho3_d_1_1_input.html#a1bb78ebd178b5f9ddb6632c0fa4fe255">GetKeyDown()</a> and <a class="el" href="class_urho3_d_1_1_input.html#ac4b40df59386239d23b72f56e0a39fe0">GetMouseButtonDown()</a> return true as long as the key or button is held down. To check whether keys are down or pressed by scancode, use <a class="el" href="class_urho3_d_1_1_input.html#a612d75d6d5aeedbb47880989fd127948">GetScancodeDown()</a> and <a class="el" href="class_urho3_d_1_1_input.html#abdbe9a0bf0355d0a2ea4c17a18d03a55">GetScancodePress()</a>. Functions also exist for converting keycodes to scancodes or vice versa, or getting key names. See for example <a class="el" href="class_urho3_d_1_1_input.html#a11874a635fe276a912cd0d58644a2681">GetKeyName()</a> and <a class="el" href="class_urho3_d_1_1_input.html#ac3d001e5eeb8b7e1ebfa8f4181e5e966">GetKeyFromScancode()</a>.</p>
<p >Mouse motion since the last frame can be accessed with <a class="el" href="class_urho3_d_1_1_input.html#a39699b2c6f447b77a674b8aa5b33f606">GetMouseMove()</a>. The cursor position within the window can be queried with <a class="el" href="class_urho3_d_1_1_input.html#af799244a701a0e94b767a59f0a82e92b">GetMousePosition()</a>.</p>
<p >In AngelScript, the polling API is accessed via properties: input.keyDown[], input.keyPress[], input.scancodeDown[], input.scancodePress[], input.mouseButtonDown[], input.mouseButtonPress[], input.mouseMove, input.mousePosition.</p>
<h1><a class="anchor" id="InputMouseModes"></a>
Mouse modes</h1>
<p >The operating system mouse cursor can be used in four modes which can be switched with <a class="el" href="class_urho3_d_1_1_input.html#a9a8eecc920bc4bf4cf3f2b1048796beb">SetMouseMode()</a>.</p>
<ul>
<li>MM_ABSOLUTE is the default behaviour, allowing the toggling of operating system cursor visibility and allowing the cursor to escape the window when visible. When the operating system cursor is invisible in absolute mouse mode, the mouse is confined to the window. If the operating system and UI cursors are both invisible, interaction with the <a class="el" href="_u_i.html">user interface</a> will be limited (eg: drag move / drag end events will not trigger). SetMouseMode(MM_ABSOLUTE) will call SetMouseGrabbed(false).</li>
<li>MM_RELATIVE sets the operating system cursor to invisible and confines the cursor to the window. The operating system cursor cannot be set to be visible in this mode via SetMouseVisible(), however changes are tracked and will be restored when another mouse mode is set. When the virtual cursor is also invisible, UI interaction will still function as normal (eg: drag events will trigger). SetMouseMode(MM_RELATIVE) will call SetMouseGrabbed(true).</li>
<li>MM_WRAP grabs the mouse from the operating system and confines the operating system cursor to the window, wrapping the cursor when it is near the edges. SetMouseMode(MM_WRAP) will call SetMouseGrabbed(true).</li>
<li>MM_FREE does not grab/confine the mouse cursor even when it is hidden. This can be used for cases where the cursor should render using the operating system outside the window, and perform custom rendering (with SetMouseVisible(false)) inside.</li>
</ul>
<h1><a class="anchor" id="InputJoystick"></a>
Joystick input</h1>
<p >Plugged in joysticks will begin sending input events automatically. Each joystick will be assigned a joystick ID which will be used in subsequent joystick events, as well as for retrieving the <a class="el" href="struct_urho3_d_1_1_joystick_state.html">joystick state</a>. Use <a class="el" href="class_urho3_d_1_1_input.html#ac6898985fd3fec14544d5ec9149badff">GetJoystick()</a> to retrieve the joystick state by ID. In case you do not have the ID, you can also use <a class="el" href="class_urho3_d_1_1_input.html#a5266435aaa177d6af3924e715e7a1d8b">GetJoystickByIndex()</a> which uses a zero-based index; see <a class="el" href="class_urho3_d_1_1_input.html#a17b4a6a1f3daafa400d69716e7f8b425">GetNumJoysticks()</a> for the number of currently connected joysticks. The ID, as well as the joystick name, can be looked up from the joystick state.</p>
<p >If the joystick model is recognized by SDL as a game controller the buttons and axes mappings utilize known constants such as CONTROLLER_BUTTON_A or CONTROLLER_AXIS_LEFTX without having to guess them. Use <a class="el" href="struct_urho3_d_1_1_joystick_state.html#a001c942d882f529ca1804fd7c74dc84a">IsController()</a> to distinguish between a game controller and an unrecognized joystick.</p>
<p >On platforms that support the accelerometer, it will appear as a "virtual" joystick.</p>
<h1><a class="anchor" id="InputTouch"></a>
Touch input</h1>
<p >On platforms where touch input is available, touch begin/end/move events will be sent, as well as multi-gesture events with pinch/rotation delta values when more than one finger is pressed down. The current finger touches can also be accessed via a polling API: <a class="el" href="class_urho3_d_1_1_input.html#a20441d83f64ca7b272e72431bc7ec120">GetNumTouches()</a> and <a class="el" href="class_urho3_d_1_1_input.html#a4be8ccd20d74e9ded51802d49656d8d0">GetTouch()</a>.</p>
<p >Touch gestures can be recorded using SDL's inbuilt $1 gesture recognition system. Use <a class="el" href="class_urho3_d_1_1_input.html#a38b0e7ff65040113836a5aff8f2d67c5">RecordGesture()</a> to start recording. The following finger movements will be recorded until the finger is lifted, at which point the recording ends and the E_GESTURERECORDED event is sent with the hash ID of the new gesture. The current in-memory gesture(s) can be saved or loaded as binary data using the <a class="el" href="class_urho3_d_1_1_input.html#af1b6f778aa35cb388074cae951ad7eb4">SaveGestures()</a>, <a class="el" href="class_urho3_d_1_1_input.html#a0953444f35f21d316ccccbfc57a67674">SaveGesture()</a>, <a class="el" href="class_urho3_d_1_1_input.html#a95761fc80687543545814a75e38bf8cf">LoadGestures()</a> functions.</p>
<p >Whenever a recognized gesture is entered by the user, the E_GESTUREINPUT event will be sent. In addition to the ID of the best matched gesture, it contains the center position and an error metric (lower = better) to help filter out false gestures.</p>
<p >Note that all recorded (whether saved or not) and loaded gestures are held in-memory. Two additional functions are available to clear them: <a class="el" href="class_urho3_d_1_1_input.html#a0c08846580c81be1ba782d2199018d79">RemoveGesture()</a> to selectively clear a gesture by its ID and <a class="el" href="class_urho3_d_1_1_input.html#a715326007639be2a591bfa4c8cd0a511">RemoveAllGestures()</a> to clear them all.</p>
<p >Touch input can also emulate a virtual joystick by displaying on-screen buttons. See the function <a class="el" href="class_urho3_d_1_1_input.html#ae6e2a0dd7db2be45379d5551187afb7b">AddScreenJoystick()</a>.</p>
<p >Touch emulation can be used to test mobile applications on a desktop machine without a touch screen. See <a class="el" href="class_urho3_d_1_1_input.html#af189e73afffcd2185b72f8546a444876">SetTouchEmulation()</a>. When touch emulation is enabled, actual mouse events are no longer sent and the operating system mouse cursor is forced visible. The left mouse button acts as a moving finger, while the rest of the mouse buttons act as stationary fingers for multi-finger gestures. For example pressing down both left and right mouse buttons, then dragging the mouse with the buttons still pressed would emulate a two-finger pinch zoom-in gesture.</p>
<h1><a class="anchor" id="InputPlatformSpecific"></a>
Platform-specific details</h1>
<p >On platforms that support it (such as Android) an on-screen virtual keyboard can be shown or hidden. When shown, keypresses from the virtual keyboard will be sent as text input events just as if typed from an actual keyboard. Show or hide it by calling <a class="el" href="class_urho3_d_1_1_input.html#a9a8e1073c5e29bac46a0183a803d6df4">SetScreenKeyboardVisible()</a>. The <a class="el" href="class_urho3_d_1_1_u_i.html" title="UI subsystem. Manages the graphical user interface.">UI</a> subsystem can also automatically show the virtual keyboard when a <a class="el" href="class_urho3_d_1_1_line_edit.html" title="Single-line text editor UI element.">LineEdit</a> element is focused, and hide it when defocused. This behavior can be controlled by calling <a class="el" href="class_urho3_d_1_1_u_i.html#ad589c4fa698684727046bfd1da5e8854">SetUseScreenKeyboard()</a>.</p>
<p >On Windows the user must first touch the screen once before touch input is activated. Trying to record or load touch gestures will fail before that. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 10 2022 04:54:52 for Urho3D by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
