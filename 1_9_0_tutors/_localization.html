<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Urho3D: Localization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Urho3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_urho3_d_1_1_localization.html" title="Localization subsystem. Stores all the strings in all languages.">Localization</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The <a class="el" href="class_urho3_d_1_1_localization.html" title="Localization subsystem. Stores all the strings in all languages.">Localization</a> subsystem provides a simple way to creating multilingual applications.</p>
<h1><a class="anchor" id="LocalizationInit"></a>
Initialization</h1>
<p >Before using the subsystem, the localization string collection(s) need to be loaded. A common practice is to do this at application startup. Multiple collection files can be loaded, and each can define either just one or several languages. For example:</p>
<div class="fragment"><div class="line">Localization* l10n = GetSubsystem&lt;Localization&gt;();</div>
<div class="line"><span class="comment">// 1st JSON file format</span></div>
<div class="line">l10n-&gt;LoadJSONFile(<span class="stringliteral">&quot;StringsEnRu.json&quot;</span>);</div>
<div class="line">l10n-&gt;LoadJSONFile(<span class="stringliteral">&quot;StringsDe.json&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2nd JSON file format</span></div>
<div class="line">l10n-&gt;LoadJSONFile(<span class="stringliteral">&quot;StringsLv.json&quot;</span>, <span class="stringliteral">&quot;lv&quot;</span>);</div>
</div><!-- fragment --><p >JSON files must be in UTF8 encoding without BOM. Sample files are in the bin/Data directory. The JSON files must have one of the following formats:</p>
<ol type="1">
<li><code>LoadJSONFile("StringsEnRu.json")</code> method will automatically pick the language from the JSON file <div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;string id 1&quot;</span>:{</div>
<div class="line">        <span class="stringliteral">&quot;language 1&quot;</span>:<span class="stringliteral">&quot;value11&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;language 2&quot;</span>:<span class="stringliteral">&quot;value12&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;language 3&quot;</span>:<span class="stringliteral">&quot;value13&quot;</span></div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;string id 2&quot;</span>:{</div>
<div class="line">        <span class="stringliteral">&quot;language 1&quot;</span>:<span class="stringliteral">&quot;value21&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;language 2&quot;</span>:<span class="stringliteral">&quot;value22&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;language 3&quot;</span>:<span class="stringliteral">&quot;value23&quot;</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>You must pass 2nd argument to the <code>LoadJSONFile("StringsLv.json", "lv")</code> method to tell the parser which language will be loaded <div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;string id 1&quot;</span>: <span class="stringliteral">&quot;value 1&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;string id 2&quot;</span>: <span class="stringliteral">&quot;value 2&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;string id 3&quot;</span>: <span class="stringliteral">&quot;value 3&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<p >Any number of languages can be defined. Remember that language names and string identifiers are case sensitive. "En" and "en" are considered different languages. During the loading process languages are numbered in order of finding. Indexing starts from zero. The first found language is set to be initially active.</p>
<h1><a class="anchor" id="LocalizationUsing"></a>
Using</h1>
<p >The Get function returns a string with the specified string identifier in the current language.</p>
<div class="fragment"><div class="line">Text* t = <span class="keyword">new</span> Text(context_);</div>
<div class="line">t-&gt;SetName(<span class="stringliteral">&quot;Text1&quot;</span>);</div>
<div class="line">Localization* l10n = GetSubsystem&lt;Localization&gt;();</div>
<div class="line">t-&gt;SetText(l10n-&gt;Get(<span class="stringliteral">&quot;string 1&quot;</span>));</div>
</div><!-- fragment --><p >If the string id is empty, an empty string will be returned. If the translation is not found, the id will be returned unmodified and a warning will be logged.</p>
<p >Use SetLanguage() function to change language at runtime.</p>
<div class="fragment"><div class="line">Localization* l10n = GetSubsystem&lt;Localization&gt;();</div>
<div class="line">l10n-&gt;SetLanguage(<span class="stringliteral">&quot;language 2&quot;</span>);</div>
</div><!-- fragment --><p >When the language is changed, the E_CHANGELANGUAGE event will be sent. Subscribe to it to perform the necessary relocalization of your user interface (texts, sprites etc.)</p>
<div class="fragment"><div class="line">SubscribeToEvent(E_CHANGELANGUAGE, URHO3D_HANDLER(Game, HandleChangeLanguage));</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> Game::HandleChangeLanguage(StringHash eventType, VariantMap&amp; eventData)</div>
<div class="line">{</div>
<div class="line">    Localization* l10n = GetSubsystem&lt;Localization&gt;();</div>
<div class="line">    ...</div>
<div class="line">    Text* t = <span class="keyword">static_cast&lt;</span>Text*<span class="keyword">&gt;</span>(uiRoot-&gt;GetChild(<span class="stringliteral">&quot;Text1&quot;</span>, <span class="keyword">true</span>));</div>
<div class="line">    t-&gt;SetText(l10n-&gt;Get(<span class="stringliteral">&quot;string 1&quot;</span>));</div>
<div class="line">}</div>
</div><!-- fragment --><p ><a class="el" href="class_urho3_d_1_1_text.html" title="Text UI element.">Text</a> UI elements also support automatic translation to avoid manual work.</p>
<div class="fragment"><div class="line">Text* t2 = <span class="keyword">new</span> Text(context_);</div>
<div class="line">t2-&gt;SetText(<span class="stringliteral">&quot;string 2&quot;</span>);</div>
<div class="line">t2-&gt;SetAutoLocalizable(<span class="keyword">true</span>);</div>
</div><!-- fragment --><p >Wherein text value is used as an identifier.</p>
<p >Also see the example 40_Localization. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 10 2022 04:54:52 for Urho3D by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
